const{src:src,dest:dest,watch:watch,parallel:parallel,series:series}=require("gulp"),eslint=require("gulp-eslint"),mocha=require("gulp-mocha"),svg=require("gulp-svg-sprite"),imagemin=require("gulp-imagemin"),imageminPngquant=require("imagemin-pngquant"),imageminJpegRecompress=require("imagemin-jpeg-recompress"),imageminWebp=require("imagemin-webp"),sync=require("browser-sync").create(),SPRITE_PATH="./images/svgs/*.svg",SPRITE_DIST_PATH="public/images/svgs";function generateSVG(cb){src(SPRITE_PATH).pipe(svg({shape:{dimension:{maxWidth:100,maxHeight:100},spacing:{padding:10},dest:"intermediate-svg"},mode:{stack:{sprite:"../sprite.svg"}}})).pipe(dest(SPRITE_DIST_PATH)),cb()}const IMAGES_PATH="./images/png-jpg/*.{png,jpeg,jpg,gif,webp}",IMAGES_DIST_PATH="public/images";function generateIMAGES(cb){return src(IMAGES_PATH).pipe(imagemin([imagemin.gifsicle(),imagemin.mozjpeg(),imagemin.optipng(),imageminPngquant(),imageminJpegRecompress(),imageminWebp({quality:75})])).pipe(dest("public/images")).on("end",(function(){cb()}))}const SRC_FONTS_PATH="./webfontkit/**/*.{ttf,woff,woff2,otf,css,}",DIST_FONTS_PATH="public/webfontkit";function generateFONTS(){return src(SRC_FONTS_PATH).pipe(dest(DIST_FONTS_PATH))}const SRC_ICONS_PATH="./icons/**/*.{png,xml,ico,json,}",DIST_ICONS_PATH="public/icons";function generateICONS(){return src(SRC_ICONS_PATH).pipe(dest("public/icons"))}function runLinter(cb){return src(["**/*.js","!node_modules/**"]).pipe(eslint()).pipe(eslint.format()).pipe(eslint.failAfterError()).on("end",(function(){cb()}))}function runTests(cb){return src(["**/*.test.js"]).pipe(mocha()).on("error",(function(){cb(new Error("Test failed"))})).on("end",(function(){cb()}))}function watchFiles(cb){watch(["**/*.js","!node_modules/**"],parallel(runLinter,runTests))}function browserSync(cb){sync.init({server:{baseDir:"./public"}}),watch("./public/**.html").on("change",sync.reload)}exports.svg=generateSVG,exports.images=generateIMAGES,exports.fonts=generateFONTS,exports.icons=generateICONS,exports.lint=runLinter,exports.test=runTests,exports.watch=watchFiles,exports.sync=browserSync,exports.default=series(runLinter,parallel(generateSVG,generateIMAGES,generateFONTS,generateICONS,browserSync),runTests);